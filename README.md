# execql
Execute multiple CQL from file with concurrency.  

# Install
with golang  
```
$ go get -u github.com/ken-aio/execql
```

Mac or Linux  
Below sample is linux. please see releases.  
```
$ wget https://github.com/ken-aio/execql/releases/download/v0.0.3/execql_v0.0.3_linux_amd64.tar.gz
$ tar xvf execql_v0.0.3_linux_amd64.tar.gz
$ mv execql /usr/local/bin/
```

# Support CQL
Support only Insert / Update / Delete.  
Select is unsupported.  

# Usage
```
Usage:
  execql [flags]

Flags:
  -f, --file string       cql file path (required)
  -h, --help              help for execql
  -H, --host string       cassandra host. split ',' if many host. e.g.) cassandra01, cassandra02
 (default "localhost")
  -k, --keyspace string   exec target keyspace (required)
  -n, --num-conns int     connection nums (default 10)
  -p, --password string   connection password
  -P, --port int          cassandra port (default 9042)
  -t, --thread int        concurrent query request thread num (default 1)
      --timeout int       query timeout(ms) (default 60000)
  -u, --user string       connection user
```

## sample command
```
$ execql -k test-keyspace -f /path/to/exec.cql -n 10 -t 20
2019/01/27 00:02:50 Reading input cql file... /Users/s-akiho/Downloads/cql
2019/01/27 00:02:50 Complete reading input cql file
2019/01/27 00:02:50 Creating cassandra session...
2019/01/27 00:03:00 Complete creating cassandra session
2019/01/27 00:03:00 Execute CQL...
#0(227) 99% [===================================================================================================================================================================================================================] 7s
#1(227) 99% [===================================================================================================================================================================================================================] 6s
#2(227) 99% [===================================================================================================================================================================================================================] 7s
#3(227) 99% [===================================================================================================================================================================================================================] 7s
#4(227) 99% [===================================================================================================================================================================================================================] 6s
#5(227) 99% [===================================================================================================================================================================================================================] 6s
#6(227) 99% [===================================================================================================================================================================================================================] 6s
#7(227) 99% [===================================================================================================================================================================================================================] 6s
#8(227) 99% [===================================================================================================================================================================================================================] 6s
#9(227) 99% [===================================================================================================================================================================================================================] 7s
#10(227) 99% [==================================================================================================================================================================================================================] 7s
#11(227) 99% [==================================================================================================================================================================================================================] 7s
#12(227) 99% [==================================================================================================================================================================================================================] 6s
#13(227) 99% [==================================================================================================================================================================================================================] 6s
#14(227) 99% [==================================================================================================================================================================================================================] 7s
#15(227) 99% [==================================================================================================================================================================================================================] 6s
#16(227) 99% [==================================================================================================================================================================================================================] 6s
#17(227) 99% [==================================================================================================================================================================================================================] 6s
#18(227) 99% [==================================================================================================================================================================================================================] 6s
#19(224) 99% [==================================================================================================================================================================================================================] 6s
2019/01/27 00:03:07 Complete execute CQL
```
